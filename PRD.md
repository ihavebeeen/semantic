# 의미망 (Semantic Network) 앱 PRD

## 프로젝트 개요

### 제품 명칭
**의미망 (Semantic Network App)**

### 비전
단어들 간의 의미적 연관성을 시각적으로 표현하고 탐색할 수 있는 인터랙티브 학습 플랫폼

### 미션
언어 학습자와 연구자들이 단어의 의미와 관계를 직관적으로 이해하고, 개인화된 의미망을 구축할 수 있도록 돕는다.

---

## 기술 스택

### Frontend
- **Framework**: Next.js 15.3.3 (React 19)
- **언어**: TypeScript 5
- **UI 라이브러리**: ReactFlow 11.11.4 (그래프 시각화)
- **스타일링**: TailwindCSS 4
- **상태 관리**: React Context + Custom Hooks

### Backend & Database
- **BaaS**: Supabase
- **데이터베이스**: PostgreSQL with RLS (Row Level Security)
- **인증**: Supabase Auth

### 개발 도구
- **패키지 관리**: npm
- **코드 품질**: ESLint 9
- **타입 체킹**: TypeScript

---

## 핵심 기능

### 1. 사용자 인증 시스템
- **로그인/회원가입**: Supabase Auth 기반
- **랜딩 페이지**: 제품 소개 및 기능 안내
- **사용자 프로필**: 개인 정보 관리

### 2. 그래프 캔버스 (GraphCanvas)
- **기본 구조**: ReactFlow 기반 인터랙티브 캔버스
- **좌표 시스템**: 수학적 4분면 좌표계 (화면 중앙 원점)
- **그리드 스냅핑**: 0.5 단위 정밀 위치 조정

#### 2.1 노드(Node) 시스템
- **구조**: 단어 + 의미 표시
- **크기**: 160px × 80px (고정)
- **상호작용**:
  - 스마트 클릭/드래그 감지 (5px 임계값)
  - 마우스 상태별 시각적 피드백 (호버, 눌림, 선택)
  - 드래그 앤 드롭 이동
- **연결 핸들**:
  - 중앙 타겟 핸들 (연결 받기 전용)
  - 하단 소스 핸들 (연결 시작 전용)

#### 2.2 엣지(Edge) 시스템
- **디자인**: 직선 점선 연결 (strokeDasharray: '8 4')
- **연결 방식**: 노드 중심 간 직선 연결
- **상호작용**:
  - 엣지 선택 시 빨간 원형 삭제 버튼 표시
  - 클릭으로 삭제 가능

#### 2.3 캔버스 상호작용
- **노드 추가**: 빈 캔버스 영역 클릭
- **확대/축소**: 마우스 휠, 컨트롤 버튼
- **전체 보기**: 피트 뷰 기능
- **카메라 이동**: 드래그 팬닝

### 3. 사이드바 UI
- **노드 추가 폼**: 단어, 의미, 품사 입력
- **검색 기능**: 기존 노드 검색 및 이동
- **품사 분류**: 8개 품사별 색상 코딩
  - 명사, 동사, 형용사, 부사, 대명사, 전치사, 접속사, 감탄사

### 4. 데이터베이스 구조

#### 4.1 사용자 관리
```sql
users: 사용자 정보 (email, username)
user_logs: 활동 로그
```

#### 4.2 단어 시스템
```sql
word_categories: 단어 카테고리
words: 단어 정보 (기본 제공 + 사용자 생성)
```

#### 4.3 의미망 구조
```sql
user_networks: 사용자별 의미망
network_nodes: 네트워크 내 노드 (위치 정보 포함)
network_edges: 노드 간 연결 관계
```

### 5. 좌표 시스템
- **정밀 좌표 계산**: 뷰포트 변환을 고려한 정확한 캔버스 절대 좌표
- **클릭 마커**: 클릭 위치 시각적 표시 및 정확한 노드 생성
- **뷰포트 동기화**: 줌/팬 상태 반영한 좌표 변환
- **위치 정확성**: 클릭한 지점에 정확히 노드 배치

---

## 사용자 경험 (UX)

### 1. 시각적 피드백
- **노드 상태**: 기본 → 호버 → 눌림 → 선택
- **색상 체계**: 품사별 구분된 색상 팔레트
- **애니메이션**: 부드러운 상태 전환 (0.15s)

### 2. 상호작용 개선
- **스마트 클릭 감지**: 드래그와 클릭 구분
- **직관적 연결**: 노드 간 시각적 연결 라인
- **컨텍스트 메뉴**: 선택된 요소별 적절한 액션

### 3. 접근성
- **키보드 네비게이션**: 탭 인덱스 지원
- **시각적 대비**: 충분한 색상 대비율
- **반응형 디자인**: 다양한 화면 크기 지원

---

## 개발 현황

### ✅ 완료된 기능
1. **기본 인프라**
   - Next.js 앱 구조 설정
   - Supabase 연동 및 인증
   - 데이터베이스 스키마 구축

2. **그래프 캔버스**
   - ReactFlow 기반 캔버스 구현
   - 커스텀 노드 컴포넌트
   - 스마트 클릭/드래그 감지
   - 직선 점선 엣지 디자인
   - 엣지 선택 및 삭제 기능
   - 정밀 좌표 시스템 (뷰포트 동기화)

3. **사용자 인터페이스**
   - 랜딩 페이지 및 인증 모달
   - 사이드바 UI 구성
   - 노드 추가 폼
   - 검색 기능

### 🚧 진행 중인 작업
1. **데이터 영속성 연동**
   - Supabase 실시간 동기화
   - 네트워크 저장/불러오기 기능

### 📋 예정된 기능
1. **고급 편집 기능**
   - 노드 편집 모달
   - 일괄 노드 조작
   - 실행 취소/다시 실행

2. **성능 최적화**
   - 대량 데이터 가상화
   - 메모이제이션 적용

---

## 품질 기준

### 1. 성능
- **초기 로딩**: 3초 이내
- **상호작용 반응성**: 100ms 이내
- **메모리 사용량**: 100MB 이하

### 2. 호환성
- **브라우저**: Chrome, Firefox, Safari, Edge (최신 2버전)
- **디바이스**: 데스크톱, 태블릿 (모바일 우선순위 낮음)

### 3. 보안
- **인증**: Supabase Auth + RLS
- **데이터 격리**: 사용자별 데이터 분리
- **API 보안**: 서버사이드 검증

---

## 배포 및 운영

### 배포 전략
- **플랫폼**: Vercel (Next.js 최적화)
- **데이터베이스**: Supabase 호스팅
- **도메인**: 커스텀 도메인 연결

### 모니터링
- **성능**: Vercel Analytics
- **에러 추적**: 내장 로깅 시스템
- **사용자 행동**: Supabase 로그 분석

---

## 향후 로드맵

### Phase 1 (현재)
- 핵심 기능 완성 ✅
- 좌표 시스템 안정화 ✅
- 데이터 영속성 연동 🚧

### Phase 2
- 퀴즈(미니게임 기능) -> 추가 예정
- AI 추천 시스템
- 모바일 최적화

### Phase 3
- 다국어 지원
- 고급 분석 도구

---

## 결론

의미망 앱은 현재 핵심 그래프 편집 기능이 구현된 상태로, 사용자가 직관적으로 단어 간의 관계를 시각화할 수 있는 도구입니다. 진행 중인 좌표 시스템 개선을 통해 더욱 정밀하고 사용자 친화적인 편집 경험을 제공할 예정입니다. 